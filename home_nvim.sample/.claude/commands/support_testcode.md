サポート〜自動テスト実装

自動テストを実装するためにサポートしてください。

全体の工程を示します。

1. 事前知識獲得
2. LiveView表示の自動テスト
3. LiveView操作の自動テスト
4. 操作やイベントに対応する関数の自動テスト

実装前に自動テストをかくTDDを、実装はインターフェスとなる処理のみで、先に仕上げるというタスクになります。

難易度が高いので、ぜひ才能を発揮してください。
Happy programming!

## 1. 事前知識獲得

CLAUDE.local.md には、今回自動テストを作成する対象となる「いまのタスク」の記載があるため確認する。

CLAUDE.local.mdにある「モノとCRUD」を参考に、自動テストを実装する。

CLAUDE.md あるいは CLAUDE.local.md における自動テストに関する記述を遵守すること。

LiveViewテストは、基本パターン(c0)の自動テストを目安とする。コンテキスト関数テストは、各パターン(c1)の自動テストを目安とする。重要な判定となる条件分岐が想定される場合は、別途関数化するなどし、c1でカバーする範囲を増やす。

## 2. LiveView表示の自動テスト

自動テスト中でDOMのIDが必要になるが、想定で記述して問題ない。

*重要* エラーのままで良いのは画面アクセス後の自動テストである。もし画面の基本的な実装（ルーティング含む）がない場合は、仮実装を行う。

## 3. LiveView操作の自動テスト

画面定義に基づいて、操作によって起こることの自動テストを実装する。

*重要* エラーのままで良いのは操作押下後の自動テスト（結果）である。もし操作自体が行えない場合は、本当に最小限の仮実装を行う。

## 4. 操作やイベントに対応する関数の自動テスト

操作と1:1対応する関数を適当なコンテキストに作る前提で自動テストを実装する。関数が複雑あるいは巨大になる見込みがあれば、関数を分離し、その想定の関数の自動テストも用意する。

*重要* エラーのままで良いのは関数呼び出し後の自動テスト（結果）である。もし関数がないときは関数のインターフェースを実装すること。その際に想定する処理や別の関数呼び出しも想定しインターフェースを実装すること。

