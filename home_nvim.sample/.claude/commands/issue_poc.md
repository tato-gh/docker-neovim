# issue_poc - イシューお試し実装

このコマンドは、反復的な実装作業のN回目を実行します。
なお前回以前のコードを**引き継がない前提**での実装を想定している。

目的の1つは、反復実装を通して標準的な実装では難しい箇所の発見である。

実装を通して得られた知見や知識はドキュメントに記録する。

## 用語定義

- {base}: 元となるブランチ名（例: feature/auth など）
- {n}: 実行回数（1, 2, 3...）
- {task}: 作業内容を表す（英単語）。指定なしも有。作業ブランチのサフィックス（例: feature/auth-times-1-test, issue/0001-times-3）
- {times-n}: N回目を表す。作業ブランチのサフィックス（例: feature/auth-times-1, issue/0001-times-3-test）


## 実行手順

### 1. 引数処理

引数がtaskを指し示す場合は、それが本コマンドの作業範囲や内容を表す。
- 例: "test"=>test, "画面のテストを充実させて"=>test
- 検証:
  - 特定したtaskの`.claude/works/{task}/commons.md`が存在しない場合、typoや勘違いの可能性があるため、処理を停止しユーザーに確認、応答を待つこと

### 2. 初期状態の確認と作業ブランチの準備

現在のブランチを確認（`git rev-parse --abbrev-ref HEAD`）し、以下のルールで処理：

1. 現在のブランチが `{base}-times-{n}-{task}`か`{base}-times-{n}`形式の場合：
   - {base}と{n}を抽出
   - 次回作業のため n = n + 1 とする
   - basedir はbaseの`/`は`-`で置換する
     - 例: `feat/001/test`のとき`feat-001-test`がbasedir
2. `main`や`develop`などの汎用ブランチの場合：
   - 実行を停止しユーザーに専用ブランチをきるように伝達して終了
3. それ以外のブランチの場合：
   - 現在のブランチを{base}とする
   - 現在のブランチに対して`{base}-times-{n}-{task}`か`{base}-times-{n}`形式があれば n = n + 1とする
   - なければ n = 1 とする（初回実行）
   - basedir はbaseの`/`は`-`で置換する
     - 例: `feat/001/test`のとき`feat-001-test`がbasedir

作業ブランチの準備：
- 現在のブランチが `{base}-times-{任意の数}-{task}`か`{base}-times-{任意の数}` 形式の場合、{base}ブランチにチェックアウト
- `{base}-times-{n}-{task}` ブランチを作成してチェックアウト
  - taskが指定されていない場合は`{base}-times-{n}`となる

### 3. issue.mdに基づき作業実施

issue.mdをもとに作業を進める。task指定があれば、該当する作業のみを行うこと。

### 4. 完了報告

実施内容のサマリーを表示。議題があれば、その内容をユーザーに報告すること。

